<html>

<head>

    <title>Verify email</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://code.jquery.com/jquery-3.1.0.js" integrity="sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk=" crossorigin="anonymous"></script>

    <style type="text/css">
        body {
            font-family: sans-serif;
            padding: 1em;
            margin: 0;
        }

        #error {
            color: red;
        }
    </style>

    <script>
        var tokenId = location.hash.replace("#", "");

        $(function () {
            $.post("./verify-email", {
                tokenId
            })
                .then(function (response) {
                    if (response.data && response.data.redirectTo)
                        location.replace(response.data.redirectTo);

                    $("#loading").hide();
                    $("#verified").show();
                })
                .fail(function (err) {
                    $("#loading").hide();
                    $("#error").show();
                });
        });

    </script>

</head>

<body>

    <div id="loading">
        <p>Please wait...</p>
    </div>

    <div id="verified" hidden>
        <p>Your email has been verified!</p>
    </div>

    <div id="error" hidden>
        <p>Email could not be verified, please try again or
            <a href="/resend-verification">request a new verification email.</a>
        </p>
    </div>

</body>

</html>